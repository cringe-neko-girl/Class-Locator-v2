<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom GPS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .search-container {
            margin-bottom: 20px;
        }
        #searchInput {
            padding: 10px;
            width: 300px;
            font-size: 16px;
        }
        #searchButton {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #searchButton:hover {
            background-color: #45a049;
        }
        .result-container {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .map-container {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: #f9f9f9;
        }
        .floor-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        svg {
            background-color: white;
            border: 1px solid #ccc;
        }
        .room {
            fill-opacity: 0.7;
            stroke: #333;
            stroke-width: 1;
        }
        .room:hover {
            fill-opacity: 1;
            stroke-width: 2;
        }
        .highlight {
            fill-opacity: 1;
            stroke-width: 3;
            stroke: #ff0000;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { stroke-width: 3; }
            50% { stroke-width: 5; }
            100% { stroke-width: 3; }
        }
        .corridor {
            fill: #ddd;
            stroke: #999;
        }
        .room-label {
            font-size: 8px;
            text-anchor: middle;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Classroom GPS System</h1>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Enter classroom name (e.g., 201, 305)">
        <button id="searchButton">Find Classroom</button>
    </div>
    
    <div id="resultContainer" class="result-container" style="display: none;">
        <div id="resultText"></div>
    </div>
    
    <div id="mapContainer" class="map-container" style="display: none;">
        <div id="floorTitle" class="floor-title"></div>
        <div id="svgContainer"></div>
    </div>

    <script>
        // Building data structure
        const building = {
            floors: [
                { // Ground floor
                    id: 0,
                    name: "Ground Floor",
                    rooms: [
                        { id: "001", name: "Reception", x: 5, y: 5, width: 20, height: 15 },
                        { id: "002", name: "Computer Lab", x: 30, y: 5, width: 20, height: 15 },
                        { id: "003", name: "Library", x: 55, y: 5, width: 20, height: 15 },
                        { id: "004", name: "Faculty Lounge", x: 5, y: 25, width: 20, height: 15 },
                        { id: "005", name: "Cafeteria", x: 30, y: 25, width: 45, height: 15 }
                    ],
                    corridors: [
                        { x: 25, y: 5, width: 5, height: 35 }, // Vertical corridor
                        { x: 5, y: 20, width: 70, height: 5 }   // Horizontal corridor
                    ]
                },
                { // First floor
                    id: 1,
                    name: "First Floor",
                    rooms: [
                        { id: "101", name: "Math Class", x: 5, y: 5, width: 15, height: 15 },
                        { id: "102", name: "Science Lab", x: 25, y: 5, width: 20, height: 15 },
                        { id: "103", name: "History Class", x: 50, y: 5, width: 15, height: 15 },
                        { id: "104", name: "Language Lab", x: 5, y: 25, width: 20, height: 15 },
                        { id: "105", name: "Art Room", x: 30, y: 25, width: 20, height: 15 }
                    ],
                    corridors: [
                        { x: 20, y: 5, width: 5, height: 35 },
                        { x: 5, y: 20, width: 65, height: 5 }
                    ]
                },
                { // Second floor
                    id: 2,
                    name: "Second Floor",
                    rooms: [
                        { id: "201", name: "Physics Lab", x: 5, y: 5, width: 15, height: 15 },
                        { id: "202", name: "Chemistry Lab", x: 25, y: 5, width: 15, height: 15 },
                        { id: "203", name: "Biology Lab", x: 45, y: 5, width: 15, height: 15 },
                        { id: "204", name: "Computer Science", x: 5, y: 25, width: 20, height: 15 },
                        { id: "205", name: "Robotics Lab", x: 30, y: 25, width: 25, height: 15 }
                    ],
                    corridors: [
                        { x: 20, y: 5, width: 5, height: 35 },
                        { x: 40, y: 5, width: 5, height: 35 },
                        { x: 5, y: 20, width: 65, height: 5 }
                    ]
                },
                { // Third floor
                    id: 3,
                    name: "Third Floor",
                    rooms: [
                        { id: "301", name: "Lecture Hall A", x: 5, y: 5, width: 25, height: 15 },
                        { id: "302", name: "Lecture Hall B", x: 35, y: 5, width: 25, height: 15 },
                        { id: "303", name: "Seminar Room", x: 5, y: 25, width: 20, height: 15 },
                        { id: "304", name: "Conference Room", x: 30, y: 25, width: 15, height: 15 },
                        { id: "305", name: "Study Room", x: 50, y: 25, width: 15, height: 15 }
                    ],
                    corridors: [
                        { x: 30, y: 5, width: 5, height: 35 },
                        { x: 5, y: 20, width: 60, height: 5 }
                    ]
                }
            ]
        };

        // Function to find a classroom by ID
        function findClassroom(classroomId) {
            for (const floor of building.floors) {
                for (const room of floor.rooms) {
                    if (room.id === classroomId) {
                        return { room, floor };
                    }
                }
            }
            return null;
        }

        // Function to generate SVG for a floor
        function generateFloorMap(floorData, highlightRoomId = null) {
            const svgWidth = 80;
            const svgHeight = 45;
            
            let svg = `<svg width="100%" height="100%" viewBox="0 0 ${svgWidth} ${svgHeight}" xmlns="http://www.w3.org/2000/svg">`;
            
            // Draw corridors first
            for (const corridor of floorData.corridors) {
                svg += `<rect x="${corridor.x}" y="${corridor.y}" width="${corridor.width}" height="${corridor.height}" class="corridor" />`;
            }
            
            // Draw rooms
            const colors = ['#fee', '#efe', '#eef', '#fef', '#ffe'];
            let colorIndex = 0;
            
            for (const room of floorData.rooms) {
                const isHighlighted = highlightRoomId && room.id === highlightRoomId;
                const classNames = `room ${isHighlighted ? 'highlight' : ''}`;
                
                svg += `<rect 
                    id="${room.id}" 
                    x="${room.x}" 
                    y="${room.y}" 
                    width="${room.width}" 
                    height="${room.height}" 
                    class="${classNames}" 
                    fill="${colors[colorIndex % colors.length]}" 
                />`;
                
                svg += `<text 
                    x="${room.x + room.width/2}" 
                    y="${room.y + room.height/2}" 
                    class="room-label"
                >${room.id}: ${room.name}</text>`;
                
                colorIndex++;
            }
            
            svg += `</svg>`;
            return svg;
        }

        // Function to display search results
        function displayResults(classroomId) {
            const result = findClassroom(classroomId);
            const resultContainer = document.getElementById('resultContainer');
            const resultText = document.getElementById('resultText');
            const mapContainer = document.getElementById('mapContainer');
            const floorTitle = document.getElementById('floorTitle');
            const svgContainer = document.getElementById('svgContainer');
            
            if (!result) {
                resultText.innerHTML = `Classroom ${classroomId} not found. Please try another room number.`;
                resultContainer.style.display = 'block';
                mapContainer.style.display = 'none';
                return;
            }
            
            const { room, floor } = result;
            resultText.innerHTML = `Classroom <strong>${room.id}</strong> (${room.name}) is located on the <strong>${floor.name}</strong>.`;
            resultContainer.style.display = 'block';
            
            // Generate and display the floor map
            floorTitle.textContent = `${floor.name} Map`;
            svgContainer.innerHTML = generateFloorMap(floor, room.id);
            mapContainer.style.display = 'block';
        }

        // Event listeners
        document.getElementById('searchButton').addEventListener('click', function() {
            const classroomId = document.getElementById('searchInput').value.trim();
            if (classroomId) {
                displayResults(classroomId);
            }
        });
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const classroomId = document.getElementById('searchInput').value.trim();
                if (classroomId) {
                    displayResults(classroomId);
                }
            }
        });

        // Initialize with a sample search
        // displayResults('201');
    </script>
</body>
</html>
